/*! Skyrim-Mod-Watcher 17-01-2015 */
function filterMods(){var a=$("#filter-mods").val().toLowerCase(),b=0;0!=string_currentFilename.length&&$("#"+string_currentFilename+" > li").each(function(){var c=$(this).text().toLowerCase();checkedFiltered&&"modlist"==string_currentFilename?(c=c.substr(c.indexOf(".")+1,c.length),(0==c.indexOf("+")||0==c.indexOf("*"))&&c.indexOf(a)>=0?($(this)[0].className=b%2==0?"whited":"grayed",b++,$(this).slideDown()):$(this).slideUp()):c.indexOf(a)>=0?($(this)[0].className=b%2==0?"whited":"grayed",b++,$(this).slideDown()):$(this).slideUp()})}function populateList(a,b,c){$.getJSON("/api/"+username+"/"+a,function(d){b[0]="";for(var e=0,f=d.length-1;e<d.length;e++,f--)b[0]+="<li class='",b[0]+=e%2==1?" grayed":" whited",b[0]+="plugins"==a?"'><span class='row-header'>"+(e+1)+".</span><span class='row-body'>"+d[e].name+"</span><span class='row-footer "+d[e].name.substr(-3,3)+"'>"+d[e].name.substr(-3,3)+"</span></li>":"modlist"==a?"'><span class='row-header'>"+(e+1)+".</span><span class='row-body'>"+d[f].name+"</span></li>":"'><span class='row-header'>"+(e+1)+".</span><span class='row-body'>"+d[e].name+"</span></li>";$("#"+a).html(b[0]),$("#num-mods").html(d.length+" lines"),"function"==typeof c&&c()})}function NavigateLists(a){return a==string_currentFilename?!1:void("plugins"==a?populateList("plugins",string_pluginsBody,SwitchFiles(a)):"modlist"==a?populateList("modlist",string_modlistBody,SwitchFiles(a)):"ini"==a?populateList("ini",string_iniBody,SwitchFiles(a)):"prefsini"==a&&populateList("prefsini",string_prefsiniBody,SwitchFiles(a)))}function SwitchFiles(a){$(".selected").removeClass("selected");var b=$(document).scrollTop();$("#"+string_currentFilename).hide(0,function(){$("#"+string_currentFilename+" > li").each(function(){$(this).is(":visible")||$(this).show()}),$("#"+a).show(0,function(){$("#"+a+"Nav").addClass("selected"),$("#username").html(username),$("#filter-mods").val(""),location.hash=a,jQuery("html,body").animate({scrollTop:b},0)})}),"modlist"==a?$("#filter-checked").show():$("#filter-checked").hide(),string_currentFilename=a}var array_listNames=["plugins","modlist","ini","prefsini"],string_pluginsBody=[],string_modlistBody=[],string_iniBody=[],string_prefsiniBody=[],string_currentFilename="",checkedFiltered=!1,expandedItem=void 0;$(document).ready(function(){for(var a=0;a<array_listNames.length;a++)$("#"+array_listNames[a]).hide();$("#filter-checked").hide(),$(".row-body").css("max-width",$("#mod-list").width()-110+"px"),$(".row-body").css("max-width",$("#plugins").width()-110+"px"),window.location.hash?(hash=window.location.hash.substr(1),$.getJSON("/api/"+username+"/"+hash,function(){"plugins"==hash?(populateList("plugins",string_pluginsBody),$("#plugins").show(),string_currentFilename="plugins",$("#"+hash+"Nav").addClass("selected")):"modlist"==hash?(populateList("modlist",string_modlistBody),$("#filter-checked").show(),$("#modlist").show(),string_currentFilename="modlist",$("#"+hash+"Nav").addClass("selected")):"ini"==hash?(populateList("ini",string_iniBody),$("#ini").show(),string_currentFilename="ini",$("#"+hash+"Nav").addClass("selected")):"prefsini"==hash?(populateList("prefsini",string_prefsiniBody),$("#prefsini").show(),string_currentFilename="prefsini",$("#"+hash+"Nav").addClass("selected")):(populateList("plugins",string_pluginsBody),$("#plugins").show(),string_currentFilename="plugins",$("#"+hash+"Nav").addClass("selected"),window.location.hash="")})):(populateList("plugins",string_pluginsBody),$("#plugins").show(),string_currentFilename="plugins",$("#pluginsNav").addClass("selected")),$("#filter-mods").keyup(filterMods),$(window).resize(function(){$(".row-body").css("max-width",$("#plugins").width()-110+"px")}),$("#filter-checked").click(function(){if(checkedFiltered)checkedFiltered=!1,$(this).html("Show Only Running Mods"),filterMods();else{var a=0;$("#"+string_currentFilename+" > li").each(function(){var b=$(this).text().toLowerCase();b=b.substr(b.indexOf(".")+1,b.length),0==b.indexOf("+")||0==b.indexOf("*")?($(this)[0].className=a%2==0?"whited":"grayed",a++,$(this).slideDown()):$(this).slideUp()}),checkedFiltered=!0,$(this).html("Show All Mods")}}),$("#enbPost").submit(function(a){$.ajax({type:"POST",url:$("#enbPost").attr("action"),data:{enb:$("#enb").val()},dataType:"text",success:function(){""!=$("#enb").val()?$("#enbText").html("ENB: "+$("#enb").val()):$("#enbText").empty()},error:function(){alert("There was an error updating your ENB")}}),a.preventDefault()}),$("#tagPost").submit(function(a){$.ajax({type:"POST",url:$("#tagPost").attr("action"),data:{tag:$("#tag").val()},dataType:"text",success:function(){""!=$("#tag").val()?$("#tagText").html('"'+$("#tag").val()+'"'):$("#tagText").empty()},error:function(){alert("There was an error updating your tags")}}),a.preventDefault()}),$("#plugins span.row-body").mouseover(function(){$(this)[0].scrollWidth>$(this).innerWidth()&&($(this).height(2*$(this).height()),$(this).css("white-space","normal"),expandedItem=$(this))}),$("#plugins span.row-body").mouseout(function(){void 0!=expandedItem&&"nowrap"!=$(this).css("white-space")&&(expandedItem.height($(this).height()/2),expandedItem.css("white-space","nowrap"),expandedItem=void 0)})});